<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>dom</title>
		<script src="//cdn.bootcss.com/randomcolor/0.4.4/randomColor.min.js"></script>
		<script type="text/javascript">
			//出现js错误的处理
			window.onerror=function(){
				alert("系统发生错误");
				return true;
			}
			window.onload=function(){
				var arr=document.getElementsByTagName("img");
				for(var i=0;i<arr.length;i++){
				  console.log(arr[i].outerHTML);
				  console.log(arr[i].src);
				}
				document.onmousedown=mouseev;
				document.linkColor="black";
				document.vlinkColor="black";
				document.alinkColor="black";
			}
			function change_bg_color(){
				var color=randomColor();
				console.log("change color:%s",color); 
				document.getElementsByTagName('body')[0].style["background-color"]=color;
			}
//			setInterval("change_bg_color()",3000);
			
			function testtypeof(){
				var i_a=1;
				var s_s="s";
				var b_b=true;
				var o_curdate=new Date;
				var f_f=change_bg_color;
				//typeof返回值是字符串类型
				console.log("typeof i_a:%s",typeof i_a);
				console.log("typeof s_s:%s",typeof s_s);
				console.log("typeof b_b:%s",typeof b_b);
				console.log("typeof o_curdate:%s",typeof o_curdate);
				console.log("typeof f_f:%s",typeof f_f);
				console.log("(typeof typeof f_f):%s",(typeof typeof f_f));
			}
			
			function getEvent(){
			     if(window.event)    {return window.event;}
			     func=getEvent.caller;
			     while(func!=null){
			         var arg0=func.arguments[0];
			         if(arg0){
			             if((arg0.constructor==Event || arg0.constructor ==MouseEvent
			                || arg0.constructor==KeyboardEvent)
			                ||(typeof(arg0)=="object" && arg0.preventDefault
			                && arg0.stopPropagation)){
			                 return arg0;
			             }
			         }
			         func=func.caller;
			     }
			     return null;
			}
			
			function keyev(){
				event=getEvent();
				if(event.ctrlKey){
					console.log("ctrl键");
				}
			}
			
			function mouseev(){
				var event=getEvent();
				console.log("event:%s",JSON.stringify(event));
				if(event.button==2){
					event.returnValue=false;
					alert("禁止右键");
					console.log("禁止右键");
				}				
			}
			//递归函数计算阶乘
			function j(num){
				if(num<=1){
					return 1;
				}
				return j(num-1)*num;
			}
			
			/**
			 * 测试string
			 */
			function teststr(){
				var hlo="hello world!";
				console.log("hlo.match(\"wor\"):%s",hlo.match("wor"));
				console.log("hlo.search(\"llo\"):%s",hlo.search("llo"));
				console.log("hlo.replace(\"hello\",\"hi\"):%s",hlo.replace("hello","hi"));
				var str="123,aaa";
				console.log(str+".replace(/\d*/,\"number\"):%s",str.replace(/\d*/,"number"));
				console.log("str.split(\"\"):%s",str.split(""));
				console.log("str.split(\" \"):%s",str.split(" "));
				console.log("str.split(\",\"):%s",str.split(","));
				console.log("str.split(\"\",3):%s",str.split("",3));	
			}
			
			/**
			 * 测试number
			 */
			function testnum(){
				var num=new Number(123);
				console.log("num.toString():%s",num.toString());
				console.log("Number.MAX_INTEGER:%s",Number.MAX_INTEGER);
				console.log("Number.MIN_SAFE_INTEGER:%s",Number.MIN_SAFE_INTEGER);
				console.log("Number.MAX_SAFE_INTEGER:%s",Number.MAX_SAFE_INTEGER);
				console.log("Number.MAX_VALUE:%s",Number.MAX_VALUE);
				console.log("Number.MIN_VALUE:%s",Number.MIN_VALUE);
				console.log("Number.NEGATIVE_INFINITY:%s",Number.NEGATIVE_INFINITY);
				console.log("Number.POSITIVE_INFINITY:%s",Number.POSITIVE_INFINITY);
				//十进制、二进制、八进制、十六进制
				console.log("num.toString(10):%s",num.toString(10));
				console.log("num.toString(2):%s",num.toString(2));
				console.log("num.toString(8):%s",num.toString(8));
				console.log("num.toString(16):%s",num.toString(16));
				console.log("num.toLocaleString():%s",num.toLocaleString());
				console.log("num.toFixed(0):%s",num.toFixed(0));
				console.log("num.toFixed(1):%s",num.toFixed(1));
				console.log("num.toFixed(2):%s",num.toFixed(2));
				console.log("num.toFixed(3):%s",num.toFixed(3));
				console.log("num.toExponential(0):%s",num.toExponential(0));
				console.log("num.toExponential(1):%s",num.toExponential(1));
				console.log("num.toExponential(2):%s",num.toExponential(2));
				console.log("num.toExponential(3):%s",num.toExponential(3));
				console.log("num.toPrecision(2):%s",num.toPrecision(2));	
			}
			
			/**
			 * 测试boolean类型数据
			 */
			function testboolean(){
				var bool=new Boolean(2);
				console.log("bool.constructor:%s",bool.constructor);
				console.log("bool.constructor==Boolean:%s",bool.constructor==Boolean);
				Boolean.prototype.echo=function(){
					console.log("echo boolean");
				};
				bool.echo();
				console.log("bool.toString():%s",bool.toString());
				console.log("typeof bool.toString():%s",typeof bool.toString());
				console.log("bool.valueOf():%s",bool.valueOf());
				console.log("typeof bool.valueOf():%s",typeof bool.valueOf());
			}
			
			function testdate(){
				var date=new Date();
				console.log("date:%s",date);
				console.log("date.constructor:%s",date.constructor);
				Date.prototype.echo=function(){
					console.log("echo date");
				}
				console.log("date.constructor:%s",date.constructor);
				date.echo();
				console.log("date.constructor==Date:%s",date.constructor==Date);
				console.log("typeof date.constructor:%s",typeof date.constructor);
			}
			
			function testArr(){
				var arr=new Array(3);
				arr[0]=1;
				arr[1]=2;
				arr[2]=3;
				arr[3]=4;
				console.log("arr:%s",arr);
				var arr2=new Array(1,2,3,"a","b");
				arr2[5]="c";
				console.log("arr2:%s",arr2);
				console.log("arr.length:%s",arr.length);
				Array.prototype.echo=function(){
					console.log(this.join("^_^"));
				}
				arr2.echo();
				console.log("arr2.concat(\"test1\",\"test2\"):%s",arr2.concat("test1","test2"));
				console.log("arr.reverse():%s",arr.reverse());//逆序排列
				arr2.sort();
				console.log("arr2-sort:%s",arr2);
//				arr2.length=10;				
				console.log("arr2.length:%s",arr2.length);
				console.log("arr2.shift():%s",arr2.shift());
				console.log("arr2.pop():%s",arr2.pop());
				console.log("arr2.unshift():%s",arr2.unshift());
				console.log("arr2.push(4):%s",arr2.push(4));
				console.log("arr2.push(4,5,6):%s",arr2.push(4,5,6));
				console.log("arr2.toString():%s",arr2.toString());
				console.log("arr2.toLocaleString():%s",arr2.toLocaleString());
				console.log("arr2.join(\"-\"):%s",arr2.join("-"));
				console.log("arr2.splice(2):%s",arr2.splice(2));
				console.log("arr2:%s",arr2);
			}
			
			function getimgstate(){
				var img1=document.getElementById("img1");
				alert(img1.readyState);
			}
			
			function createdocument(){
				var dw=window.open();
				dw.document.open();
				dw.document.writeln("test");
				dw.document.close();
			}
			
			function testerror(){
				var i;
				try{
					i=1/0;
					k
				}catch(e){
					console.log(e);
					throw new Error(e);
				}finally{
					console.log("finally");					
				}
			}
//			testtypeof();
//			teststr();
//			testnum();
//			testboolean();
//			testdate();
//			testArr();
			testerror();
		</script>
	</head>
	<body onkeydown="keyev()">
		<a href="log4javascript.html" target="_blank">log4javascript</a>
		<script type="text/javascript">
			document.writeln("<h1>hello</h1>");
			document.writeln("<h1>world</h1>");
			document.writeln("document.fileCreatedDate:"+document.fileCreatedDate+"<br/>");
			document.writeln("document.fileModifiedDate："+document.fileModifiedDate+"<br/>");
			document.writeln("document.lastModified:"+document.lastModified+"<br/>");
			document.writeln("document.fileSize:"+document.fileSize+"<br/>");
			document.writeln("document.readyState:"+document.readyState+"<br/>");
			document.writeln("<iframe src=\"adapter.html\" width=\"100%\" height=\"200\"></iframe>");
		</script>
		<button onclick="getimgstate()">getimgstate</button><br />
		<button onclick="createdocument()">createdocument</button><br />
		<img id="img1" src="../agile/assets/app/img/slide3.jpg" /><br />
		<img src="../agile/assets/app/img/slide3.jpg" /><br />
		<img src="../agile/assets/app/img/slide3.jpg" />
	</body>
</html>
